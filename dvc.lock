schema: '2.0'
stages:
  data_ingestion:
    cmd: python -m src.components.data_ingestion --source s3
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 0e1f128ecbd0a61fc70464255dd28859
      size: 2019
    - path: src/components/data_ingestion.py
      hash: md5
      md5: 5be91a88a18da12e5200f2c021581d5f
      size: 8407
    - path: src/utils/fetch_data.py
      hash: md5
      md5: d3699e6665a72f8fa4c0b89cc98a1b08
      size: 29634
    params:
      config/config.yaml:
        data_ingestion.source_type: s3
    outs:
    - path: artifacts/data/raw/raw_data.csv
      hash: md5
      md5: f861fc031a33c1fd756f722bec449e09
      size: 11318048
  data_transformation_Feature_engineering:
    cmd: python -m src.components.data_FE_transformation
    deps:
    - path: artifacts/data/raw/raw_data.csv
      hash: md5
      md5: f861fc031a33c1fd756f722bec449e09
      size: 11318048
    - path: src/components/data_FE_transformation.py
      hash: md5
      md5: a72fb698854592d84047c6e35d073099
      size: 42584
    - path: src/constants/config.py
      hash: md5
      md5: 441d2e42c7435e36a8575a502d464138
      size: 4067
    outs:
    - path: artifacts/data/transformed/Test_transformed.csv
      hash: md5
      md5: 7b7faaa427526cd6c4843ac43a391c65
      size: 7404598
    - path: artifacts/data/transformed/Train_transformed.csv
      hash: md5
      md5: a28390bf069b7da23b62cae9a062045d
      size: 29593230
  model_training:
    cmd: python -m src.components.model_training_evaluation
    deps:
    - path: artifacts/data/transformed/Test_transformed.csv
      hash: md5
      md5: 7b7faaa427526cd6c4843ac43a391c65
      size: 7404598
    - path: artifacts/data/transformed/Train_transformed.csv
      hash: md5
      md5: a28390bf069b7da23b62cae9a062045d
      size: 29593230
    - path: src/components/model_training_evaluation.py
      hash: md5
      md5: 7116f1f5942a6d34c2a83556c44e59b5
      size: 22916
    - path: src/constants/config.py
      hash: md5
      md5: 441d2e42c7435e36a8575a502d464138
      size: 4067
    - path: src/constants/params.yaml
      hash: md5
      md5: 86fd55b2e0edb875bd0e3f6df5260f2c
      size: 679
    params:
      src/constants/params.yaml:
        model_params.XGBClassifier:
          objective: binary:logistic
          eval_metric: auc
          tree_method: hist
          device: cuda
          scale_pos_weight: 27
          max_depth: 10
          min_child_weight: 5
          learning_rate: 0.02
          n_estimators: 3000
          subsample: 0.8
          colsample_bytree: 0.7
          reg_alpha: 1
          reg_lambda: 2
          early_stopping_rounds: 80
        model_training:
          test_size: 0.13
          random_state: 6
          target_column: isFraud
    outs:
    - path: models/XGBClassifier_latest.joblib
      hash: md5
      md5: 3491fe2a00eb0b57d4daa8d0073cbca2
      size: 1658976
    - path: models/confusion_matrix.png
      hash: md5
      md5: a82db045de0e0c5547bc0930c99a7262
      size: 34692
    - path: models/metrics.json
      hash: md5
      md5: a069227150b6cebc4c6e60c1ba351938
      size: 311
