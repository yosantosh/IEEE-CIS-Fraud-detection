schema: '2.0'
stages:
  data_ingestion:
    cmd: python -m src.components.data_ingestion --source s3
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 0e1f128ecbd0a61fc70464255dd28859
      size: 2019
    - path: src/components/data_ingestion.py
      hash: md5
      md5: ae613b1c3228dab0cb7779888cc436a5
      size: 10694
    - path: src/constants/schema.yaml
      hash: md5
      md5: 64765111446998e0bda6b4bff92bb952
      size: 24579
    - path: src/utils/fetch_data.py
      hash: md5
      md5: d3699e6665a72f8fa4c0b89cc98a1b08
      size: 29634
    params:
      config/config.yaml:
        data_ingestion.source_type: s3
    outs:
    - path: artifacts/data/raw/raw_data.csv
      hash: md5
      md5: dcbd057970505b5358b78e7777971c8e
      size: 127587460
  data_transformation_Feature_engineering:
    cmd: python -m src.components.data_FE_transformation
    deps:
    - path: artifacts/data/raw/raw_data.csv
      hash: md5
      md5: dcbd057970505b5358b78e7777971c8e
      size: 127587460
    - path: src/components/data_FE_transformation.py
      hash: md5
      md5: 65578caed69dc34107a75fccf6d0d0d4
      size: 42288
    - path: src/constants/config.py
      hash: md5
      md5: c4955925764c8fd93a2c6f47039b4f03
      size: 4070
    - path: src/constants/schema.yaml
      hash: md5
      md5: efbb80df32d4fea765c1c3b26ea08b98
      size: 36130
    outs:
    - path: artifacts/data/transformed/Test_transformed.csv
      hash: md5
      md5: 97ca2f7e55b709b9987d76912c3504e2
      size: 80592580
    - path: artifacts/data/transformed/Train_transformed.csv
      hash: md5
      md5: a4ba5edb299226e258185ba248c665d6
      size: 322589854
  model_training:
    cmd: python -m src.components.model_training_evaluation
    deps:
    - path: artifacts/data/transformed/Test_transformed.csv
      hash: md5
      md5: 97ca2f7e55b709b9987d76912c3504e2
      size: 80592580
    - path: artifacts/data/transformed/Train_transformed.csv
      hash: md5
      md5: a4ba5edb299226e258185ba248c665d6
      size: 322589854
    - path: src/components/model_training_evaluation.py
      hash: md5
      md5: 7116f1f5942a6d34c2a83556c44e59b5
      size: 22916
    - path: src/constants/config.py
      hash: md5
      md5: c4955925764c8fd93a2c6f47039b4f03
      size: 4070
    - path: src/constants/params.yaml
      hash: md5
      md5: 86fd55b2e0edb875bd0e3f6df5260f2c
      size: 679
    - path: src/constants/schema.yaml
      hash: md5
      md5: efbb80df32d4fea765c1c3b26ea08b98
      size: 36130
    params:
      src/constants/params.yaml:
        model_params.XGBClassifier:
          objective: binary:logistic
          eval_metric: auc
          tree_method: hist
          device: cuda
          scale_pos_weight: 27
          max_depth: 10
          min_child_weight: 5
          learning_rate: 0.02
          n_estimators: 3000
          subsample: 0.8
          colsample_bytree: 0.7
          reg_alpha: 1
          reg_lambda: 2
          early_stopping_rounds: 80
        model_training:
          test_size: 0.13
          random_state: 6
          target_column: isFraud
    outs:
    - path: models/XGBClassifier_latest.joblib
      hash: md5
      md5: 987b31c82adf09c90ea468ee8a177b13
      size: 8292345
    - path: models/confusion_matrix.png
      hash: md5
      md5: 0b1eaba6fe17ff2dc683857b11cae93b
      size: 38402
    - path: models/metrics.json
      hash: md5
      md5: 2450cfa80b668fa6868815a3101b9dab
      size: 301
